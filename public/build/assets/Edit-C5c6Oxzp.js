import{R as c,r as f,j as r,m as Y,L as Z}from"./app-CuaBbPit.js";import{c as C,a as ee,S as te,B as D}from"./button-QnSxUCmd.js";import{P as re}from"./Combination-Bva-9kli.js";import{I as w}from"./input-ilK0Qv_G.js";import{S as O,a as P,b as M,c as L,d as V}from"./select-CXUA2dL5.js";import{A as se}from"./AuthenticatedLayout-Bkkqsatv.js";import"./index-DOK35P3q.js";import"./chevron-up-DPMth9B4.js";import"./createLucideIcon-BigX0G2a.js";import"./transition-BdSxhDDA.js";var ne=e=>e.type==="checkbox",ae=e=>e instanceof Date,T=e=>e==null;const ie=e=>typeof e=="object";var F=e=>!T(e)&&!Array.isArray(e)&&ie(e)&&!ae(e),oe=e=>F(e)&&e.target?ne(e.target)?e.target.checked:e.target.value:e,le=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,de=(e,n)=>e.has(le(n)),ce=e=>{const n=e.constructor&&e.constructor.prototype;return F(n)&&n.hasOwnProperty("isPrototypeOf")},ue=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function R(e){let n;const t=Array.isArray(e),a=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)n=new Date(e);else if(e instanceof Set)n=new Set(e);else if(!(ue&&(e instanceof Blob||a))&&(t||F(e)))if(n=t?[]:{},!t&&!ce(e))n=e;else for(const s in e)e.hasOwnProperty(s)&&(n[s]=R(e[s]));else return e;return n}var W=e=>Array.isArray(e)?e.filter(Boolean):[],E=e=>e===void 0,m=(e,n,t)=>{if(!n||!F(e))return t;const a=W(n.split(/[,[\].]+?/)).reduce((s,i)=>T(s)?s:s[i],e);return E(a)||a===e?E(e[n])?t:e[n]:a},k=e=>typeof e=="boolean",me=e=>/^\w*$/.test(e),fe=e=>W(e.replace(/["|']|\]/g,"").split(/\.|\[/)),B=(e,n,t)=>{let a=-1;const s=me(n)?[n]:fe(n),i=s.length,l=i-1;for(;++a<i;){const u=s[a];let d=t;if(a!==l){const o=e[u];d=F(o)||Array.isArray(o)?o:isNaN(+s[a+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=d,e=e[u]}return e};const U={BLUR:"blur",CHANGE:"change"},$={all:"all"},xe=c.createContext(null),N=()=>c.useContext(xe);var he=(e,n,t,a=!0)=>{const s={defaultValues:n._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const l=i;return n._proxyFormState[l]!==$.all&&(n._proxyFormState[l]=!a||$.all),t&&(t[l]=!0),e[l]}});return s},ge=e=>F(e)&&!Object.keys(e).length,pe=(e,n,t,a)=>{t(e);const{name:s,...i}=e;return ge(i)||Object.keys(i).length>=Object.keys(n).length||Object.keys(i).find(l=>n[l]===!0)},je=e=>Array.isArray(e)?e:[e],G=(e,n,t)=>!e||!n||e===n||je(e).some(a=>a&&(t?a===n:a.startsWith(n)||n.startsWith(a)));function H(e){const n=c.useRef(e);n.current=e,c.useEffect(()=>{const t=!e.disabled&&n.current.subject&&n.current.subject.subscribe({next:n.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function ye(e){const n=N(),{control:t=n.control,disabled:a,name:s,exact:i}=e||{},[l,u]=c.useState(t._formState),d=c.useRef(!0),o=c.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),h=c.useRef(s);return h.current=s,H({disabled:a,next:b=>d.current&&G(h.current,b.name,i)&&pe(b,o.current,t._updateFormState)&&u({...t._formState,...b}),subject:t._subjects.state}),c.useEffect(()=>(d.current=!0,o.current.isValid&&t._updateValid(!0),()=>{d.current=!1}),[t]),c.useMemo(()=>he(l,t,o.current,!1),[l,t])}var be=e=>typeof e=="string",ve=(e,n,t,a,s)=>be(e)?m(t,e,s):Array.isArray(e)?e.map(i=>m(t,i)):t;function _e(e){const n=N(),{control:t=n.control,name:a,defaultValue:s,disabled:i,exact:l}=e||{},u=c.useRef(a);u.current=a,H({disabled:i,subject:t._subjects.values,next:h=>{G(u.current,h.name,l)&&o(R(ve(u.current,t._names,h.values||t._formValues,!1,s)))}});const[d,o]=c.useState(t._getWatch(a,s));return c.useEffect(()=>t._removeUnmounted()),d}function Fe(e){const n=N(),{name:t,disabled:a,control:s=n.control,shouldUnregister:i}=e,l=de(s._names.array,t),u=_e({control:s,name:t,defaultValue:m(s._formValues,t,m(s._defaultValues,t,e.defaultValue)),exact:!0}),d=ye({control:s,name:t,exact:!0}),o=c.useRef(s.register(t,{...e.rules,value:u,...k(e.disabled)?{disabled:e.disabled}:{}})),h=c.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!m(d.errors,t)},isDirty:{enumerable:!0,get:()=>!!m(d.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!m(d.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!m(d.validatingFields,t)},error:{enumerable:!0,get:()=>m(d.errors,t)}}),[d,t]),b=c.useMemo(()=>({name:t,value:u,...k(a)||d.disabled?{disabled:d.disabled||a}:{},onChange:x=>o.current.onChange({target:{value:oe(x),name:t},type:U.CHANGE}),onBlur:()=>o.current.onBlur({target:{value:m(s._formValues,t),name:t},type:U.BLUR}),ref:x=>{const S=m(s._fields,t);S&&x&&(S._f.ref={focus:()=>x.focus(),select:()=>x.select(),setCustomValidity:v=>x.setCustomValidity(v),reportValidity:()=>x.reportValidity()})}}),[t,s._formValues,a,d.disabled,u,s._fields]);return c.useEffect(()=>{const x=s._options.shouldUnregister||i,S=(v,X)=>{const A=m(s._fields,v);A&&A._f&&(A._f.mount=X)};if(S(t,!0),x){const v=R(m(s._options.defaultValues,t));B(s._defaultValues,t,v),E(m(s._formValues,t))&&B(s._formValues,t,v)}return!l&&s.register(t),()=>{(l?x&&!s._state.action:x)?s.unregister(t):S(t,!1)}},[t,s,l,i]),c.useEffect(()=>{s._updateDisabledField({disabled:a,fields:s._fields,name:t})},[a,t,s]),c.useMemo(()=>({field:b,formState:d,fieldState:h}),[b,d,h])}const Se=e=>e.render(Fe(e));var Ce="Label",K=f.forwardRef((e,n)=>r.jsx(re.label,{...e,ref:n,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));K.displayName=Ce;var q=K;const we=ee("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),z=f.forwardRef(({className:e,...n},t)=>r.jsx(q,{ref:t,className:C(we(),e),...n}));z.displayName=q.displayName;const J=f.createContext({}),_=({...e})=>r.jsx(J.Provider,{value:{name:e.name},children:r.jsx(Se,{...e})}),I=()=>{const e=f.useContext(J),n=f.useContext(Q),{getFieldState:t,formState:a}=N(),s=t(e.name,a);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=n;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},Q=f.createContext({}),g=f.forwardRef(({className:e,...n},t)=>{const a=f.useId();return r.jsx(Q.Provider,{value:{id:a},children:r.jsx("div",{ref:t,className:C("space-y-2",e),...n})})});g.displayName="FormItem";const p=f.forwardRef(({className:e,...n},t)=>{const{error:a,formItemId:s}=I();return r.jsx(z,{ref:t,className:C(a&&"text-destructive",e),htmlFor:s,...n})});p.displayName="FormLabel";const j=f.forwardRef(({...e},n)=>{const{error:t,formItemId:a,formDescriptionId:s,formMessageId:i}=I();return r.jsx(te,{ref:n,id:a,"aria-describedby":t?`${s} ${i}`:`${s}`,"aria-invalid":!!t,...e})});j.displayName="FormControl";const Ve=f.forwardRef(({className:e,...n},t)=>{const{formDescriptionId:a}=I();return r.jsx("p",{ref:t,id:a,className:C("text-sm text-muted-foreground",e),...n})});Ve.displayName="FormDescription";const y=f.forwardRef(({className:e,children:n,...t},a)=>{const{error:s,formMessageId:i}=I(),l=s?String(s==null?void 0:s.message):n;return l?r.jsx("p",{ref:a,id:i,className:C("text-sm font-medium text-destructive",e),...t,children:l}):null});y.displayName="FormMessage";function ke({student:e,departments:n}){const{data:t,setData:a,patch:s,errors:i,processing:l}=Y({name:e.name,email:e.email,phone:e.phone,address:e.address,gender:e.gender,department_id:e.department_id.toString()}),u=o=>{o.preventDefault(),s(route("students.update",e.id))},d=o=>{(o==="male"||o==="female"||o==="other")&&a("gender",o)};return r.jsxs(se,{header:r.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Edit Student"}),children:[r.jsx(Z,{title:"Edit Student"}),r.jsx("div",{className:"py-12",children:r.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:r.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:r.jsx("div",{className:"p-6 text-gray-900",children:r.jsxs("form",{onSubmit:u,className:"space-y-6 max-w-xl",children:[r.jsx(_,{name:"name",render:()=>r.jsxs(g,{children:[r.jsx(p,{children:"Name"}),r.jsx(j,{children:r.jsx(w,{value:t.name,onChange:o=>a("name",o.target.value)})}),i.name&&r.jsx(y,{children:i.name})]})}),r.jsx(_,{name:"email",render:()=>r.jsxs(g,{children:[r.jsx(p,{children:"Email"}),r.jsx(j,{children:r.jsx(w,{type:"email",value:t.email,onChange:o=>a("email",o.target.value)})}),i.email&&r.jsx(y,{children:i.email})]})}),r.jsx(_,{name:"phone",render:()=>r.jsxs(g,{children:[r.jsx(p,{children:"Phone"}),r.jsx(j,{children:r.jsx(w,{value:t.phone,onChange:o=>a("phone",o.target.value)})}),i.phone&&r.jsx(y,{children:i.phone})]})}),r.jsx(_,{name:"address",render:()=>r.jsxs(g,{children:[r.jsx(p,{children:"Address"}),r.jsx(j,{children:r.jsx(w,{value:t.address,onChange:o=>a("address",o.target.value)})}),i.address&&r.jsx(y,{children:i.address})]})}),r.jsx(_,{name:"gender",render:()=>r.jsxs(g,{children:[r.jsx(p,{children:"Gender"}),r.jsxs(O,{value:t.gender,onValueChange:d,children:[r.jsx(j,{children:r.jsx(P,{children:r.jsx(M,{placeholder:"Select gender"})})}),r.jsxs(L,{children:[r.jsx(V,{value:"male",children:"Male"}),r.jsx(V,{value:"female",children:"Female"}),r.jsx(V,{value:"other",children:"Other"})]})]}),i.gender&&r.jsx(y,{children:i.gender})]})}),r.jsx(_,{name:"department_id",render:()=>r.jsxs(g,{children:[r.jsx(p,{children:"Department"}),r.jsxs(O,{value:t.department_id,onValueChange:o=>a("department_id",o),children:[r.jsx(j,{children:r.jsx(P,{children:r.jsx(M,{placeholder:"Select department"})})}),r.jsx(L,{children:n.map(o=>r.jsx(V,{value:o.id.toString(),children:o.name},o.id))})]}),i.department_id&&r.jsx(y,{children:i.department_id})]})}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx(D,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancel"}),r.jsx(D,{type:"submit",disabled:l,children:"Update Student"})]})]})})})})})]})}export{ke as default};
